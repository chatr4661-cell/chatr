<!doctype html>
<html lang="en">
  <head>
    <!-- Preconnect for instant loading -->
    <link rel="preconnect" href="https://sbayuqgomlflmxgicplz.supabase.co" crossorigin />
    <link rel="preload" href="/src/main.tsx" as="script" crossorigin />
    
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- Primary Meta Tags -->
    <title>Chatr+ — Say It. Share It. Live It.</title>
    <meta name="title" content="Chatr+ — Say It. Share It. Live It.">
    <meta name="description" content="Chatr+ is a next-gen super-app for communication, healthcare, business, and lifestyle. Chat, video call, order food, access care, explore mini-apps, and grow your network — all in one ecosystem.">
    <meta name="keywords" content="Chatr+, Chatr App, Super App India, AI Chat App, Health Hub, Doctor Booking, Business CRM, Community App, Local Deals, Food Ordering, TalentXcel, Chat Platform, Social App, AI Assistant, Chatr Chat, Noida Startups, Delhi NCR App">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="TalentXcel Services Pvt. Ltd.">
    
    <!-- Favicon & Icons -->
    <link rel="icon" href="https://chatr.chat/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="https://chatr.chat/assets/chatrplus-logo512.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Theme Colors -->
    <meta name="theme-color" content="#0066FF">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000" />
    <meta name="msapplication-TileColor" content="#0066FF">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Chatr+" />
    <link rel="apple-touch-startup-image" href="/chatr-logo.png" />
    
    <!-- Android PWA Support -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="applicable-device" content="pc, mobile, tv">
    
    <!-- Open Graph / Facebook / WhatsApp -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chatr.chat/">
    <meta property="og:title" content="Chatr+ — Say It. Share It. Live It.">
    <meta property="og:description" content="Your all-in-one ecosystem: chat, call, book doctors, access AI health tools, run your business, and earn — with Chatr+.">
    <meta property="og:image" content="https://chatr.chat/assets/chatrplus-og-banner.png">
    <meta property="og:image:alt" content="Chatr+ — Say It. Share It. Live It.">
    <meta property="og:site_name" content="Chatr+">
    <meta property="og:locale" content="en_IN">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter / X Meta -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ChatrAppOfficial">
    <meta name="twitter:creator" content="@TalentXcel">
    <meta name="twitter:url" content="https://chatr.chat/">
    <meta name="twitter:title" content="Chatr+ — Say It. Share It. Live It.">
    <meta name="twitter:description" content="Chat. Connect. Care. Grow. Chatr+ is the super-app redefining communication, business, and community across India.">
    <meta name="twitter:image" content="https://chatr.chat/assets/chatrplus-og-banner.png">
    <meta name="twitter:image:alt" content="Chatr+ Super App Preview">
    <meta name="twitter:label1" content="Users">
    <meta name="twitter:data1" content="325+ and growing">
    <meta name="twitter:label2" content="Earn Rewards">
    <meta name="twitter:data2" content="Join Chatr Champions">
    
    <!-- App Store / Deep Link Integration -->
    <meta name="apple-itunes-app" content="app-id=1234567890">
    <meta name="google-play-app" content="app-id=com.chatrplus.app">
    
    <!-- Deep Links -->
    <meta property="al:android:url" content="chatr://open">
    <meta property="al:android:package" content="com.chatrplus.app">
    <meta property="al:android:app_name" content="Chatr+">
    <meta property="al:ios:url" content="chatr://open">
    <meta property="al:ios:app_store_id" content="1234567890">
    <meta property="al:ios:app_name" content="Chatr+">
    
    <!-- Canonical & Alternate Links -->
    <link rel="canonical" href="https://chatr.chat/">
    <link rel="alternate" href="https://chatr.chat/" hreflang="en-in" />
    
    <!-- Social Share Enhancements -->
    <meta property="article:author" content="https://talentxcel.in">
    <meta property="article:publisher" content="https://chatr.chat">
    <meta property="article:section" content="Technology">
    <meta property="article:tag" content="AI, Chat, Super App, Business Tools, Health Tech, Startup India">
    
    <!-- Structured Data Schema - Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Chatr+",
      "alternateName": "Chatr Plus",
      "url": "https://chatr.chat",
      "logo": "https://chatr.chat/assets/chatrplus-logo512.png",
      "sameAs": [
        "https://twitter.com/ChatrAppOfficial",
        "https://linkedin.com/company/talentxcel",
        "https://www.instagram.com/chatrplus/",
        "https://www.facebook.com/chatrplus"
      ],
      "founder": {
        "@type": "Person",
        "name": "TalentXcel Team",
        "url": "https://talentxcel.in"
      },
      "description": "Chatr+ is an integrated platform merging chat, health, AI, business, and community tools into one super-app ecosystem.",
      "foundingDate": "2025",
      "location": {
        "@type": "Place",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Noida",
          "addressRegion": "Uttar Pradesh",
          "addressCountry": "IN"
        }
      }
    }
    </script>
    
    <!-- Structured Data Schema - Mobile Application -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MobileApplication",
      "name": "Chatr+",
      "operatingSystem": "Android, iOS, Web",
      "applicationCategory": "Social Communication, Health, Business, Lifestyle",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "325"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "INR"
      },
      "featureList": [
        "💬 Chat — Messages, Calls, & Video",
        "❤️ Health Hub — AI assistant, vitals & reports",
        "⚕️ Care Access — Book doctors & emergency help",
        "🌍 Community — Groups, stories & challenges",
        "📱 Mini-Apps — Discover & install apps",
        "🏢 Business — CRM, inbox & analytics",
        "✅ Official — Verified accounts & services",
        "💸 Chatr Champions — Earn ₹ through referrals",
        "🤝 Chatr Partner — Join our campus & business partner programs",
        "🩺 Doctor Portal — Register as a healthcare provider",
        "🍲 Ecosystem — Food ordering, local deals & more",
        "⚡ Quick Access — Chatr Studio, AI Assistant, Emergency tools"
      ],
      "url": "https://chatr.chat"
    }
    </script>
  </head>

  <body>
    <!-- React fix applied -->
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Service Worker Registration - PWA Compliant -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            const registration = await navigator.serviceWorker.register('/sw.js', {
              scope: '/',
              updateViaCache: 'none'
            });
            
            console.log('SW registered:', registration);
            
            // Check for updates every 60 seconds
            setInterval(() => {
              registration.update();
            }, 60000);
            
            // Request notification permission
            if ('Notification' in window && Notification.permission === 'default') {
              await Notification.requestPermission();
            }
            
            // Register periodic sync only if supported (shorter tags)
            if ('periodicSync' in registration) {
              try {
                // Use shorter tag names to avoid InvalidAccessError
                await registration.periodicSync.register('sync', {
                  minInterval: 24 * 60 * 60 * 1000 // 24 hours
                });
                console.log('Periodic sync registered');
              } catch (err) {
                console.log('Periodic sync not available:', err.message);
              }
            }
            
            // Listen for updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              if (newWorker) {
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // New SW available, auto-reload
                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                    window.location.reload();
                  }
                });
              }
            });
            
            // Handle controller change
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
              if (!refreshing) {
                refreshing = true;
                window.location.reload();
              }
            });
            
          } catch (err) {
            console.error('SW registration failed:', err);
          }
        });
      }
      
      // Handle install prompt
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        console.log('PWA Install prompt ready');
        
        // Optionally show install button
        window.showInstallPrompt = () => {
          if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choice) => {
              console.log('User choice:', choice.outcome);
              deferredPrompt = null;
            });
          }
        };
      });
      
      // Handle app installed
      window.addEventListener('appinstalled', () => {
        console.log('PWA installed successfully');
        deferredPrompt = null;
      });
    </script>
  </body>
</html>
